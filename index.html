<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JoBrain ‚Äî —Ç—Ä–µ–Ω–∞–∂—ë—Ä –ø–∞–º—è—Ç–∏</title>
  <meta name="theme-color" content="#2563eb" />
  <link rel="manifest" href="manifest.json" />
  <style>
    /* --- –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, –º–æ–±–∏–ª—å–Ω—ã–π) --- */
    :root {
      --bg1: #e8f0ff;
      --accent: #2563eb;
      --card: #ffffff;
      --muted: #6b7280;
      --radius: 14px;
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      --maxw: 820px;
    }
    html,body { height:100%; }
    body{
      margin:0; font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg,var(--bg1),#ffffff);
      display:flex; flex-direction:column; align-items:center; color:#111;
      padding:18px 12px 36px;
    }
    header {
      width:100%; max-width:var(--maxw);
      display:flex; align-items:center; gap:12px;
      margin-bottom:12px;
    }
    .logo {
      width:56px; height:56px; border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      background: linear-gradient(135deg,#3b82f6,#2563eb); color:#fff; font-weight:700;
      font-size:26px; box-shadow:var(--shadow);
    }
    h1{ margin:0; font-size:1.25rem; color:var(--accent); }
    main{ width:100%; max-width:var(--maxw); display:flex; flex-direction:column; gap:12px; }

    .panel{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:12px; display:flex; flex-direction:column; gap:8px;
    }

    .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    label.small { font-size:0.9rem; color:var(--muted); }
    input[type="text"], textarea, select {
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid #e6eefc;
      font-size:1rem; background:#fbfdff;
    }
    textarea { min-height:120px; resize:vertical; }

    .controls { display:flex; gap:8px; flex-wrap:wrap; }
    .btn {
      padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
      font-weight:600; font-size:1rem;
    }
    .btn.primary { background:var(--accent); color:white; box-shadow:0 6px 14px rgba(37,99,235,0.18); }
    .btn.ghost { background:transparent; color:var(--accent); border:1px solid rgba(37,99,235,0.12); }
    .btn.warn { background:#f97316; color:white; }
    .btn.block { flex:1; }

    .lang-row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

    #cardsContainer { display:flex; flex-direction:column; gap:10px; margin-top:8px; }
    .card {
      background:#fff; border-radius:12px; padding:12px; box-shadow:0 4px 12px rgba(2,6,23,0.06);
    }
    .card .meta { display:flex; justify-content:space-between; gap:8px; font-size:0.85rem; color:var(--muted); }
    .card .q { font-weight:700; color:#0f172a; margin-top:8px; cursor:pointer; }
    .card .a { margin-top:8px; color:#111827; display:none; white-space:pre-wrap; }
    .card .card-actions { display:flex; gap:8px; margin-top:10px; }

    /* Modal */
    .modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); z-index:1000; padding:16px; }
    .modal .box { width:100%; max-width:720px; background:white; border-radius:12px; padding:14px; max-height:90vh; overflow:auto; }

    /* Small screens */
    @media (max-width:520px){
      .row { flex-direction:column; align-items:stretch; }
      .controls { flex-direction:column; }
      header { gap:10px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">J</div>
    <div>
      <h1>JoBrain ‚Äî —Ç—Ä–µ–Ω–∞–∂—ë—Ä –ø–∞–º—è—Ç–∏</h1>
      <div style="font-size:0.85rem; color:var(--muted)">–°–æ–∑–¥–∞–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è–π —Ç–µ–º—ã, –ø–æ–≤—Ç–æ—Ä—è–π —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏</div>
    </div>
  </header>

  <main>
    <!-- INPUT PANEL -->
    <div class="panel" id="inputPanel">
      <div class="row">
        <input id="subjectInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ë–∏–æ–ª–æ–≥–∏—è)" />
        <input id="themeInput" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ / —Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: –§–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑)" />
      </div>

      <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <input id="aiPrompt" type="text" placeholder="–í–æ–ø—Ä–æ—Å / –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI (–Ω–∞–ø—Ä–∏–º–µ—Ä: '–°–¥–µ–ª–∞–π –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ –¥–ª—è 9 –∫–ª–∞—Å—Å–∞')" style="flex:1;" />
        <button class="btn ghost" id="pasteBtn" title="–í—Å—Ç–∞–≤–∏—Ç—å (paste)">–í—Å—Ç–∞–≤–∏—Ç—å</button>
      </div>

      <textarea id="textInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —É—Ä–æ–∫–∞ –∏–ª–∏ –≤–æ–ø—Ä–æ—Å ‚Äî –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ç AI –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏"></textarea>

      <div class="lang-row">
        <label class="small">–Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ (–∞–≤—Ç–æ):</label>
        <label><input type="radio" name="lang" value="auto" checked /> –ê–≤—Ç–æ</label>
        <label><input type="radio" name="lang" value="ru" /> –†—É—Å—Å–∫–∏–π</label>
        <label><input type="radio" name="lang" value="en" /> –ê–Ω–≥–ª–∏–π—Å–∫–∏–π</label>
        <label><input type="radio" name="lang" value="kz" /> –ö–∞–∑–∞—Ö—Å–∫–∏–π</label>
      </div>

      <div style="display:flex; gap:8px; margin-top:6px; align-items:center; flex-wrap:wrap;">
        <button class="btn primary" id="generateBtn">üß† –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</button>
        <button class="btn ghost" id="aiGenerateBtn">ü§ñ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–ª–æ–∫–∞–ª—å–Ω–æ)</button>
        <button class="btn ghost" id="catalogBtn">üìö –ö–∞—Ç–∞–ª–æ–≥ —Ç–µ–º</button>
        <button class="btn ghost" id="reviewBtn">üîÑ –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ</button>
      </div>
    </div>

    <!-- Cards -->
    <div id="cardsContainer"></div>
  </main>

  <!-- CATALOG MODAL -->
  <div class="modal" id="catalogModal">
    <div class="box">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h3>
