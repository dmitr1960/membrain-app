<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemBrain</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input, button { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        button { background: #4CAF50; color: white; border: none; cursor: pointer; }
        button:disabled { background: #ccc; }
        #result { margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px; white-space: pre-wrap; }
        .loading { color: #666; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <h1>MemBrain</h1>
        <input type="text" id="topic" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–∑–∏–∫–∞)">
        <button id="memeBtn">üé≠ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–º</button>
        <button id="cardsBtn">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</button>
        <div id="result">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫</div>
    </div>

    <script>
        // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥ –±–µ–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –∫–∞–≤—ã—á–∫–∞–º–∏
        document.addEventListener('DOMContentLoaded', function() {
            const OPENAI_KEY = 'sk-proj-NZHtWXKoSc7r7aROKathHS3';
            const topicInput = document.getElementById('topic');
            const resultDiv = document.getElementById('result');
            const memeBtn = document.getElementById('memeBtn');
            const cardsBtn = document.getElementById('cardsBtn');
            
            async function generateContent(type) {
                const topic = topicInput.value.trim();
                
                if (!topic) { 
                    resultDiv.innerHTML = '‚ö† –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É!'; 
                    return; 
                }
                
                // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
                memeBtn.disabled = true;
                cardsBtn.disabled = true;
                resultDiv.innerHTML = '<div class="loading">‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º... –≠—Ç–æ –∑–∞–π–º–µ—Ç 10-20 —Å–µ–∫—É–Ω–¥</div>';
                
                try {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫
                    let prompt;
                    if (type === 'meme') {
                        prompt = '–ü—Ä–∏–¥—É–º–∞–π –∏–¥–µ—é –¥–ª—è –º–µ–º–∞ –Ω–∞ —Ç–µ–º—É: ' + topic;
                    } else {
                        prompt = '–°–æ–∑–¥–∞–π 3 —É—á–µ–±–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Ç–µ–º—É: ' + topic;
                    }
                    
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer ' + OPENAI_KEY,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: 'gpt-3.5-turbo',
                            messages: [{ role: 'user', content: prompt }],
                            max_tokens: 500
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.error) {
                        resultDiv.innerHTML = '‚ùå –û—à–∏–±–∫–∞ API: ' + data.error.message;
                    } else if (data.choices && data.choices[0] && data.choices[0].message) {
                        resultDiv.innerHTML = data.choices[0].message.content;
                    } else {
                        resultDiv.innerHTML = '‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç AI';
                    }
                    
                } catch (error) {
                    resultDiv.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + error.message;
                } finally {
                    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
                    memeBtn.disabled = false;
                    cardsBtn.disabled = false;
                }
            }
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            memeBtn.addEventListener('click', () => generateContent('meme'));
            cardsBtn.addEventListener('click', () => generateContent('cards'));
        });
    </script>
</body>
</html>
